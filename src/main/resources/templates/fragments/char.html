<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" xmlns="http://www.w3.org/1999/xhtml" lang="en">
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
    <title>Index</title>
    <link href="webjars/bootstrap/3.3.6/css/bootstrap.min.css" rel="stylesheet"></link>
</head>
<body>
<div th:fragment="char-view (character)">
    <!--/*@thymesVar id="character" type="dyn.model.Character"*/-->
    <p align="center" style="margin-bottom: 3px;">
        <span th:text="${character.getName()}" data-toggle="tooltip" th:alt-title="${character.getFullName()}"></span>
    </p>
    <p align="center" style="font-size: 10px; margin: 0px;" data-toggle="tooltip" th:alt-title="${'Раса'}">
        <span th:if="${character.getRace().getName() == 'race.human'}" th:text="#{${character.getRace().getName()}}"></span>
        <span th:unless="${character.getRace().getName() == 'race.human'}" th:text="#{${character.getRace().getName()}}" style="color:DarkOrchid"></span>
    </p>
    <div align="center" style="font-size: 10px; margin: 0px;">
        <img th:src="@{'/graphics/vocation/vocation'+${character.getCareer().getVocation().getId()}+'.png' }"
             data-toggle="tooltip" th:alt-title="${'Призвание: ' + character.getCareer().getVocation().getName() + '. Приносит ресурсы: ' + character.getCareer().getVocation().resString(1)}"
             th:height="${imsize}==null?20:50">
        </img>
        <span th:text="${character.getCareer().getIntelligence()}" data-toggle="tooltip" title="Интеллект"></span>|
        <span th:text="${character.getCareer().getCharisma()}" data-toggle="tooltip" title="Харизма"></span>|
        <span th:text="${character.getCareer().getStrength()}" data-toggle="tooltip" title="Сила"></span>|
        <span th:text="${character.getCareer().getCreativity()}" data-toggle="tooltip" title="Творчество"></span>
        <img th:src="@{'/graphics/education/'+${character.getCareer().getEducation().getName()}+'.png' }"
             data-toggle="tooltip" th:alt-title="'Образование: '+#{${character.getCareer().getEducation().getName()}}"
             th:height="${imsize}==null?20:50">
        </img>
        <th:block th:if="${education==true}">
            <form th:action="@{/game/improveEducation}" method="post" style="float:right">
                <input type="hidden" name="character" th:value="${character.getId()}"/>
                <!--<a href='#' onClick='submit()' style="font-size: 8px; margin: 0px; color:red;">Повысить</a>-->
                <!--<button class="btn btn-xs btn-primary" type="submit" data-toggle="tooltip" th:title="Повысить">^</button>-->
                <input type="image" th:src="@{'/graphics/button_improve.png'}"
                       data-toggle="tooltip" title="Повысить образование"
                       th:height="${imsize}==null?20:50"/>
            </form>
        </th:block>
        <br/>
        <th:block th:if="${character.getCareer().getProfession()!=null}">
            <span th:text="${character.getCareer().getProfession().getName()+'(' + character.getCareer().getProfession().getLevel() + ')'}" style="color:midnightblue"
                  data-toggle="tooltip" th:alt-title="Профессия">
            </span>
        </th:block>
    </div>
    <a href="/game/character" th:href="${nolink}==null?@{/game/character(characterId=${character.getId()})}:''">
        <img th:class="${character.getSex()} == 'male' ? male : female" th:height="${imsize}==null?100:${imsize}"
             th:width="${imsize}==null?100:${imsize}"
             th:src="@{'data:image/png;base64,'+${character.getEncodedView()}}"
             data-toggle="tooltip" th:alt-title="#{tooltip(
                                           ${character.getFullName()},
                                           #{${character.getBody().getName()}}+${character.getBody().isRare()?'*':''},
                                           #{${character.getEars().getName()}}+${character.getEars().isRare()?'*':''},
                                           #{${character.getEyebrows().getName()}}+${character.getEyebrows().isRare()?'*':''},
                                           #{${character.getEyeColor().getName()}}+${character.getEyeColor().isRare()?'*':''},
                                           #{${character.getEyes().getName()}}+${character.getEyes().isRare()?'*':''},
                                           #{${character.getHairColor().getName()}}+${character.getHairColor().isRare()?'*':''},
                                           #{${character.getHairStyle().getName()}},
                                           #{${character.getHairType().getName()}}+${character.getHairType().isRare()?'*':''},
                                           #{${character.getHead().getName()}}+${character.getHead().isRare()?'*':''},
                                           #{${character.getHeight().getName()}}+${character.getHeight().isRare()?'*':''},
                                           #{${character.getMouth().getName()}}+${character.getMouth().isRare()?'*':''},
                                           #{${character.getNose().getName()}}+${character.getNose().isRare()?'*':''},
                                           #{${character.getSkinColor().getName()}}+${character.getSkinColor().isRare()?'*':''})}"
             data-placement="right"/>

    </a>
    <div>
        <div style="display: inline-block;" th:each="buff : ${character.getBuffs()}">
            <img th:src="@{'/graphics/buffs/'+${buff.getTitle()}+'.png' }"
                 data-toggle="tooltip" th:alt-title="#{${buff.getTitle()}}"
                 th:height="${imsize}==null?20:50">
            </img>
        </div>
    </div>
</div>

<script src="webjars/jquery/1.9.1/jquery.min.js"></script>
<script src="webjars/bootstrap/3.3.6/js/bootstrap.min.js"></script>
</body>
</html>